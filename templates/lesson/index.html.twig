{% extends 'base.html.twig' %}

{% block title %}Every lessons!{% endblock %}

{% block schoolId %}{{ schoolId }}{% endblock %}

{% block body %}
<div class="col-d-8">
		<h3 class="pb-4 mb-4 fst-italic border-bottom">
			Lessons
		</h3>

		<article class="blog-post w-100">
			<p>if you want to add a new lesson, <a href="{{ path('lesson_new', {'schoolId': schoolId}) }}" class="text-primary">click here</a>.</p>

			<form method="get" class="d-flex gap-2 align-items-end" action="{{ path('lesson_index', {'schoolId': schoolId, 'search': search, 'searchMode': searchMode}) }}">
				<div class="form-group" style="width: 200px;">
					<label for="searchMode">Search Mode</label>
					<select class="form-control" id="searchMode" name="searchMode">
						<option value="name" {% if searchMode == 'name' %}selected{% endif %}>Name</option>
						<option value="teacher" {% if searchMode == 'teacher' %}selected{% endif %}>Teacher</option>
						<option value="room" {% if searchMode == 'room' %}selected{% endif %}>Room</option>
					</select>
				</div>
				<div class="form-group" style="width: 200px;">
					<label for="search">Search</label>
					<input type="text" class="form-control" id="search" name="search" value="{{ search }}">
				</div>
				<button type="submit" class="btn btn-primary">Search</button>
			</form>

			<table class="table">
				<thead>
					<tr>
						<th>Name</th>
						<th>Teacher</th>
						<th>Room</th>
						<th>Date</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for lesson in lessons %}
					<tr>
							<td>{{ lesson.name }}</td>
							<td>{{ lesson.teacher }}</td>
							<td>{{ lesson.room }}</td>
							<td>{{ lesson.date|date('d/m/Y') }} {{ lesson.startTime|date('H:i') }} - {{ lesson.endTime|date('H:i') }}</td>
							<td>
								<a href="{{ path('lesson_show', {'lessonId': lesson.id, 'schoolId': schoolId}) }}" class="text-primary">show</a>
								<a href="{{ path('lesson_edit', {'lessonId': lesson.id, 'schoolId': schoolId}) }}" class="text-primary">edit</a>
							</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</article>


	</div>
{% endblock %}
